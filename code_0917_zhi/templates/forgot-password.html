<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>忘記密碼</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/forgot-password.css') }}"
    />
  </head>
  <body>
    <header>職業災害勞工服務資訊整合管理系統</header>

    <div class="container">
      <!-- Step 1 驗證身分 -->
      <div class="box" id="step1Box">
        <h3>Step1 驗證身分</h3>

        <!-- 職員編號輸入欄 -->
        <form id="staff-form" onsubmit="return false;">
          <div class="input-group">
            <i class="fa-solid fa-id-card"></i>
            <input
              id="step1StaffIdInput"
              type="text"
              placeholder="請輸入職員編號"
            />
            <button type="button" class="btn send-btn" onclick="sendCode()">
              發送
            </button>
          </div>
        </form>

        <!-- 驗證碼輸入欄 -->
        <form id="verification-form" onsubmit="return false;">
          <div class="input-group">
            <i class="fa-solid fa-user-check"></i>
            <input id="step1CodeInput" type="text" placeholder="請輸入驗證碼" />
            <button type="button" class="btn verify-btn" onclick="verifyCode()">
              認證
            </button>
          </div>
        </form>
      </div>

      <!-- Step 2 變更密碼 -->
      <div class="box disabled" id="step2Box">
        <h3>Step2 變更密碼</h3>
        <form id="reset-form" onsubmit="return false;">
          <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input
              id="step2NewPasswordInput"
              type="password"
              placeholder="密碼"
            />
            <i
              class="fa-solid fa-eye-slash"
              onclick="togglePassword('step2NewPasswordInput', this)"
            ></i>
          </div>
          <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input
              id="step2ConfirmPasswordInput"
              type="password"
              placeholder="再次輸入"
            />
            <i
              class="fa-solid fa-eye-slash"
              onclick="togglePassword('step2ConfirmPasswordInput', this)"
            ></i>
          </div>
          <button
            type="button"
            class="submit-btn"
            onclick="submitNewPassword()"
          >
            確定變更
          </button>
        </form>
      </div>
    </div>

    <!-- 返回按鈕（放在container外面，靠右對齊） -->
    <div class="outer-back-button" id="backButtonContainer">
      <button type="button" class="back-btn" onclick="leavePage()">返回</button>
    </div>

    <!-- 彈窗提示 -->
    <div class="modal" id="alertModal">
      <div class="modal-content">
        <div class="modal-header">提醒</div>
        <p id="modalMessage">這是提示訊息</p>
        <div class="modal-buttons">
          <button class="ok-btn" onclick="closeModal()">OK</button>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/forgot-password.js') }}"></script>

    <script>
      function leavePage() {
        window.location.href = "/";
      }

      // 密碼送出成功後，隱藏返回按鈕
      function hideBackButton() {
        const backButtonContainer = document.getElementById(
          "backButtonContainer"
        );
        if (backButtonContainer) {
          backButtonContainer.style.display = "none";
        }
      }
    </script>
  </body>
</html>
